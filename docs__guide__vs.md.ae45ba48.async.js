"use strict";(self.webpackChunkasync_modal_render=self.webpackChunkasync_modal_render||[]).push([[257,526],{58925:function(t,a,n){n.r(a);var s=n(12604),c=n(98556),i=n(8325),x=n(31699),m=n(75691),d=n(54056),v=n(45284),p=n(13304),I=n(10886),h=n(58911),y=n(32621),E=n(86597),M=n(40773),l=n(10650),r=n(58153),o=n(75271),_=n(6387),e=n(52676);function u(){return(0,e.jsx)(l.dY,{children:(0,e.jsx)(o.Suspense,{fallback:(0,e.jsx)(r.Z,{}),children:(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)("div",{className:"markdown",children:[(0,e.jsxs)("h1",{id:"vs",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#vs",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"VS"]}),(0,e.jsxs)("p",{children:[_.texts[0].value,(0,e.jsx)("code",{children:_.texts[1].value}),_.texts[2].value,(0,e.jsx)("code",{children:_.texts[3].value}),_.texts[4].value,(0,e.jsx)("code",{children:_.texts[5].value}),_.texts[6].value]}),(0,e.jsxs)("h2",{id:"1-\u65E0\u9700\u7E41\u7410\u7684\u72B6\u6001\u7BA1\u7406-vs-normal",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#1-\u65E0\u9700\u7E41\u7410\u7684\u72B6\u6001\u7BA1\u7406-vs-normal",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"1. \u65E0\u9700\u7E41\u7410\u7684\u72B6\u6001\u7BA1\u7406 (vs Normal)"]}),(0,e.jsxs)("p",{children:[(0,e.jsx)("strong",{children:_.texts[7].value}),_.texts[8].value,(0,e.jsx)("code",{children:_.texts[9].value}),_.texts[10].value]}),(0,e.jsx)(d.Z,{lang:"tsx",children:_.texts[11].value}),(0,e.jsxs)("p",{children:[(0,e.jsx)("strong",{children:_.texts[12].value}),_.texts[13].value]}),(0,e.jsx)(d.Z,{lang:"tsx",children:_.texts[14].value}),(0,e.jsxs)("h2",{id:"2-\u65E0\u9700\u521B\u5EFA\u5305\u88C5\u7EC4\u4EF6-vs-nicemodal",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#2-\u65E0\u9700\u521B\u5EFA\u5305\u88C5\u7EC4\u4EF6-vs-nicemodal",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"2. \u65E0\u9700\u521B\u5EFA\u5305\u88C5\u7EC4\u4EF6 (vs NiceModal)"]}),(0,e.jsxs)("p",{children:[(0,e.jsx)("strong",{children:_.texts[15].value}),_.texts[16].value,(0,e.jsx)("code",{children:_.texts[17].value}),_.texts[18].value,(0,e.jsx)("code",{children:_.texts[19].value}),_.texts[20].value]}),(0,e.jsx)(d.Z,{lang:"tsx",children:_.texts[21].value}),(0,e.jsxs)("p",{children:[(0,e.jsx)("strong",{children:_.texts[22].value}),_.texts[23].value,(0,e.jsx)("code",{children:_.texts[24].value}),_.texts[25].value]}),(0,e.jsx)(d.Z,{lang:"tsx",children:_.texts[26].value}),(0,e.jsxs)("h2",{id:"3-\u57FA\u4E8E-promise-\u7684\u7EBF\u6027\u903B\u8F91\u6D41\u7A0B",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#3-\u57FA\u4E8E-promise-\u7684\u7EBF\u6027\u903B\u8F91\u6D41\u7A0B",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"3. \u57FA\u4E8E Promise \u7684\u7EBF\u6027\u903B\u8F91\u6D41\u7A0B"]}),(0,e.jsxs)("p",{children:[_.texts[27].value,(0,e.jsx)("code",{children:_.texts[28].value}),_.texts[29].value,(0,e.jsx)("code",{children:_.texts[30].value}),_.texts[31].value]}),(0,e.jsx)(d.Z,{lang:"tsx",children:_.texts[32].value}),(0,e.jsxs)("h2",{id:"4-\u5B8C\u5584\u7684-typescript-\u7C7B\u578B\u652F\u6301",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#4-\u5B8C\u5584\u7684-typescript-\u7C7B\u578B\u652F\u6301",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"4. \u5B8C\u5584\u7684 TypeScript \u7C7B\u578B\u652F\u6301"]}),(0,e.jsxs)("p",{children:[(0,e.jsx)("code",{children:_.texts[33].value}),_.texts[34].value]}),(0,e.jsxs)("ul",{children:[(0,e.jsxs)("li",{children:[(0,e.jsx)("strong",{children:_.texts[35].value}),_.texts[36].value,(0,e.jsx)("code",{children:_.texts[37].value}),_.texts[38].value,(0,e.jsx)("code",{children:_.texts[39].value}),_.texts[40].value]}),(0,e.jsxs)("li",{children:[(0,e.jsx)("strong",{children:_.texts[41].value}),_.texts[42].value,(0,e.jsx)("code",{children:_.texts[43].value}),_.texts[44].value,(0,e.jsx)("code",{children:_.texts[45].value}),_.texts[46].value,(0,e.jsx)("code",{children:_.texts[47].value}),_.texts[48].value]})]}),(0,e.jsx)(d.Z,{lang:"tsx",children:_.texts[49].value})]})})})})}a.default=u},40733:function(t,a,n){n.d(a,{Z:function(){return s.Z}});var s=n(88086)},6387:function(t,a,n){n.r(a),n.d(a,{texts:function(){return s}});const s=[{value:"\u901A\u8FC7\u5BF9\u6BD4 ",paraId:0,tocIndex:0},{value:"Normal",paraId:0,tocIndex:0},{value:" (\u4F20\u7EDF React \u72B6\u6001\u7BA1\u7406) \u548C ",paraId:0,tocIndex:0},{value:"NiceModal",paraId:0,tocIndex:0},{value:"(@ebay/nice-modal-react) \u5E93\uFF0C\u4EE5\u4E0B\u662F ",paraId:0,tocIndex:0},{value:"async-modal-render",paraId:0,tocIndex:0},{value:" \u7684\u4E3B\u8981\u4F18\u52BF\u603B\u7ED3\u3002",paraId:0,tocIndex:0},{value:"Normal (\u4F20\u7EDF\u65B9\u5F0F):",paraId:1,tocIndex:1},{value:`
\u9700\u8981\u5B9A\u4E49\u5927\u91CF\u7684 `,paraId:1,tocIndex:1},{value:"useState",paraId:1,tocIndex:1},{value:"\uFF0C\u7F16\u5199\u5F00\u5173\u5904\u7406\u51FD\u6570\uFF0C\u5E76\u4E14\u5FC5\u987B\u5728 JSX \u4E2D\u663E\u5F0F\u6302\u8F7D\u7EC4\u4EF6\u3002",paraId:1,tocIndex:1},{value:`// Normal.tsx \u4F2A\u4EE3\u7801
function NormalExample() {
  const [visible, setVisible] = useState(false);

  const handleOpen = () => setVisible(true);
  const handleOk = () => setVisible(false);

  return (
    <>
      <Button onClick={handleOpen}>Open Modal</Button>
      {/* \u5FC5\u987B\u5728 JSX \u4E2D\u9884\u57CB\u7EC4\u4EF6 */}
      <MyModal
        visible={visible}
        onOk={handleOk}
        onCancel={() => setVisible(false)}
      />
    </>
  );
}
`,paraId:2,tocIndex:1},{value:"Async Modal Render:",paraId:3,tocIndex:1},{value:`
\u5B8C\u5168\u4E0D\u9700\u8981\u5B9A\u4E49 State\uFF0C\u4E5F\u4E0D\u9700\u8981\u5728 JSX \u4E2D\u9884\u57CB\u7EC4\u4EF6\u3002`,paraId:3,tocIndex:1},{value:`// AsyncModalExample.tsx \u4F2A\u4EE3\u7801
function AsyncExample() {
  const { render } = useAsyncModalRenderContext();

  const handleOpen = async () => {
    // \u76F4\u63A5\u51FD\u6570\u5F0F\u8C03\u7528\uFF0C\u81EA\u52A8\u6302\u8F7D\u548C\u9500\u6BC1
    await render(MyModal, { visible: true });
  };

  return <Button onClick={handleOpen}>Open Modal</Button>;
}
`,paraId:4,tocIndex:1},{value:"NiceModal:",paraId:5,tocIndex:2},{value:`
\u4E3A\u4E86\u4F7F\u7528\u73B0\u6709\u7684\u5F39\u7A97\u7EC4\u4EF6\uFF0C\u5FC5\u987B\u5148\u4F7F\u7528 `,paraId:5,tocIndex:2},{value:"NiceModal.create",paraId:5,tocIndex:2},{value:" \u521B\u5EFA\u4E00\u4E2A\u5305\u88C5\u5668 (Wrapper) \u6765\u5904\u7406 ",paraId:5,tocIndex:2},{value:"useModal",paraId:5,tocIndex:2},{value:" \u7684 resolve/reject \u903B\u8F91\u3002",paraId:5,tocIndex:2},{value:`// NiceModalExample.tsx \u4F2A\u4EE3\u7801
// \u5FC5\u987B\u5B9A\u4E49\u989D\u5916\u7684 Wrapper
const MyModalWrapper = NiceModal.create(() => {
  const modal = useModal();
  return (
    <MyModal
      visible={modal.visible}
      onOk={() => {
        modal.resolve(); // \u624B\u52A8\u5904\u7406 Promise
        modal.remove();  // \u624B\u52A8\u6E05\u7406
      }}
    />
  );
});

// \u8C03\u7528\u65F6
NiceModal.show(MyModalWrapper);
`,paraId:6,tocIndex:2},{value:"Async Modal Render:",paraId:7,tocIndex:2},{value:`
\u53EF\u4EE5\u76F4\u63A5\u4F7F\u7528\u539F\u59CB\u7EC4\u4EF6\uFF0C\u96F6\u4FB5\u5165\u6027\u3002\u5982\u679C Props \u547D\u540D\u4E0D\u6807\u51C6\uFF0C\u53EF\u4EE5\u4F7F\u7528 `,paraId:7,tocIndex:2},{value:"withAsyncModalPropsMapper",paraId:7,tocIndex:2},{value:" \u5728\u884C\u5185\u52A8\u6001\u6620\u5C04\uFF0C\u65E0\u9700\u989D\u5916\u6587\u4EF6\u6216\u7EC4\u4EF6\u5B9A\u4E49\u3002",paraId:7,tocIndex:2},{value:`// AsyncModalExample.tsx \u4F2A\u4EE3\u7801
// \u573A\u666F 1: \u76F4\u63A5\u4F7F\u7528
await render(MyModal, { visible: true });

// \u573A\u666F 2: \u884C\u5185\u52A8\u6001\u6620\u5C04 Props (\u65E0\u9700 Wrapper)
await render(
  withAsyncModalPropsMapper(MyCustomModal, ['onConfirm', 'onClose']),
  { open: true }
);
`,paraId:8,tocIndex:2},{value:"\u903B\u8F91\u66F4\u52A0\u8FDE\u8D2F\uFF0C\u7B26\u5408\u76F4\u89C9\uFF0C\u907F\u514D\u4E86\u903B\u8F91\u5206\u6563\u5728 ",paraId:9,tocIndex:3},{value:"onClick",paraId:9,tocIndex:3},{value:" \u548C ",paraId:9,tocIndex:3},{value:"onOk",paraId:9,tocIndex:3},{value:" \u7B49\u591A\u4E2A\u56DE\u8C03\u51FD\u6570\u4E2D\u3002",paraId:9,tocIndex:3},{value:`const handleSubmit = async () => {
  try {
    // 1. \u6253\u5F00\u5F39\u7A97\u5E76\u7B49\u5F85\u7528\u6237\u64CD\u4F5C
    const inputValue = await render(InputModal, { visible: true });
    
    // 2. \u83B7\u53D6\u7ED3\u679C\u540E\u76F4\u63A5\u8FDB\u884C\u540E\u7EED\u5904\u7406 (\u4EC5\u5728\u7528\u6237\u786E\u8BA4\u540E\u6267\u884C)
    await submitToApi(inputValue);
    message.success('\u64CD\u4F5C\u6210\u529F');
    
  } catch {
    // 3. \u5904\u7406\u7528\u6237\u53D6\u6D88\u7684\u60C5\u51B5
    message.info('\u7528\u6237\u5DF2\u53D6\u6D88');
  }
};
`,paraId:10,tocIndex:3},{value:"async-modal-render",paraId:11,tocIndex:4},{value:" \u63D0\u4F9B\u4E86\u4F18\u79C0\u7684 TypeScript \u7C7B\u578B\u63A8\u5BFC\u80FD\u529B\uFF0C\u80FD\u591F\u81EA\u52A8\u8BC6\u522B\u7EC4\u4EF6 Props \u548C\u8FD4\u56DE\u503C\u7C7B\u578B\uFF0C\u63D0\u4F9B\u5F00\u53D1\u65F6\u7684\u667A\u80FD\u63D0\u793A\u548C\u7C7B\u578B\u5B89\u5168\u4FDD\u969C\u3002",paraId:11,tocIndex:4},{value:"\u5165\u53C2\u7C7B\u578B\u7EA6\u675F",paraId:12,tocIndex:4},{value:"\uFF1A\u8C03\u7528 ",paraId:12,tocIndex:4},{value:"render",paraId:12,tocIndex:4},{value:" \u65F6\uFF0C\u4F1A\u81EA\u52A8\u68C0\u67E5\u4F20\u5165\u7684 ",paraId:12,tocIndex:4},{value:"props",paraId:12,tocIndex:4},{value:" \u662F\u5426\u7B26\u5408\u7EC4\u4EF6\u5B9A\u4E49\u7684 Props \u7C7B\u578B\u3002",paraId:12,tocIndex:4},{value:"\u8FD4\u56DE\u503C\u7C7B\u578B\u63A8\u5BFC",paraId:12,tocIndex:4},{value:"\uFF1A",paraId:12,tocIndex:4},{value:"await render(...)",paraId:12,tocIndex:4},{value:" \u7684\u8FD4\u56DE\u503C\u7C7B\u578B\u4F1A\u81EA\u52A8\u63A8\u5BFC\u4E3A\u7EC4\u4EF6\u56DE\u8C03\u51FD\u6570\uFF08\u5982 ",paraId:12,tocIndex:4},{value:"onOk",paraId:12,tocIndex:4},{value:", ",paraId:12,tocIndex:4},{value:"onConfirm",paraId:12,tocIndex:4},{value:"\uFF09\u7684\u53C2\u6570\u7C7B\u578B\u3002",paraId:12,tocIndex:4},{value:`// \u5B9A\u4E49\u7EC4\u4EF6 Props
interface MyModalProps {
  title: string;
  onConfirm: (result: { id: number; name: string }) => void;
  onCancel: () => void;
  visible: boolean;
}

// \u8C03\u7528\u793A\u4F8B
const result = await render(
  MyModal,
  {
    title: 'Type Check', // \u2705 \u7C7B\u578B\u68C0\u67E5\uFF1A\u5FC5\u987B\u662F string
    // otherProp: 123    // \u274C \u62A5\u9519\uFF1A\u5C5E\u6027\u4E0D\u5B58\u5728
    visible: true
  }
);

// \u2705 \u81EA\u52A8\u63A8\u5BFC result \u7C7B\u578B\u4E3A: { id: number; name: string }
console.log(result.name); 
`,paraId:13,tocIndex:4}]}}]);
